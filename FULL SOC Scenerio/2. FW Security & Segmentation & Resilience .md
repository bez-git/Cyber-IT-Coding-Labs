# Module 2: Physical & Perimeter Security (Network Segmentation & Resilience)

**Mission:** Implement Layer 3 Access Control Lists (ACLs) to block malicious traffic, architect a segmented "Guest" network using 802.1Q VLANs, and perform an Out-of-Band (OOB) disaster recovery operation to restore access to a locked-down firewall.

**Key Skills:** Firewall Policy Management, 802.1Q VLAN Tagging, Trunking vs. Access Ports, Static IP Networking, Out-of-Band Management (OOB).

---

## 1. Perimeter Control: Address Objects & Policies
We configured the FortiGate to identify specific assets and enforce a "Deny" policy.

### Step 1: Object Management
* **Goal:** Create a permanent digital "Name Tag" for the workstation.
* **Action:** Defined a specific Address Object B_Laptop mapped to the laptop's IP.
* **Target:** Created an FQDN object Bad_Website (pointing to example.com) to simulate a malicious domain.

<p align="center">
<img width="400" alt="Address Object" src="https://github.com/user-attachments/assets/b7770eb4-5bd3-44ea-8ca3-ff7cf8cfa809" />
<img width="400" alt="FQDN Object" src="https://github.com/user-attachments/assets/f13ee84a-f220-40d6-9b74-fceaca933221" />
<img width="400" height="350" alt="image" src="https://github.com/user-attachments/assets/fc649aeb-bc6b-4ee1-9760-69a7e519601e" />
</p>

### Step 2: Firewall Policy (ACL)
* **Action:** Created a "Top-Down" Firewall Policy named Block_Bez_Example.
* **Logic:** IF Source = B_Laptop AND Destination = Bad_Website THEN Action = DENY`.
* **Validation:** Attempted to visit the target site. The connection was successfully dropped by the firewall (ERR_CONNECTION_TIMED_OUT), proving the policy is active.

<p align="center">
<img width="400" alt="Firewall Policy" src="https://github.com/user-attachments/assets/0edfc23c-eeb7-4257-95dc-02b68040c540" />

<img width="400" height="500" alt="image" src="https://github.com/user-attachments/assets/1c36c64b-1719-4aa9-b1dc-47555adb75a8" />
<img width="400" height="626" alt="image" src="https://github.com/user-attachments/assets/d5be0461-b17b-449e-a2f9-6e169ecf56a0" />
<img width="400" height="681" alt="image" src="https://github.com/user-attachments/assets/308aa1cd-0bfb-4404-95c9-cbe2321285b5" />
<img width="400" height="232" alt="image" src="https://github.com/user-attachments/assets/3914eea4-5ed0-4b77-92ab-f2fa28f186dc" />


---
## 2. Network Segmentation: VLAN Implementation
To improve security posture, we moved from a "Flat Network" to a "Segmented Network" by creating an isolated Guest Zone.

### Step 1: FortiGate VLAN Interface
* **Config:** Created a new Interface `Lab_Bez_VLAN` tagged with **VLAN ID 20**.
* **Addressing:** Assigned a separate subnet (`192.168.20.0/24`) and enabled a DHCP server to hand out IPs to guests.

<p align="center">
<img width="1285" height="1045" alt="image" src="https://github.com/user-attachments/assets/97706f75-1a19-4ee8-981d-6da2cc01463b" />
<img width="1397" height="473" alt="image" src="https://github.com/user-attachments/assets/92318502-e41a-411a-897d-4c1a03615f48" />
</p>

### Step 2: Switch Configuration (802.1Q)
We had to configure the physical TP-Link switch to understand the VLAN tags coming from the firewall.

* **Global Config:** Enabled **802.1Q VLAN** mode.
* **VLAN Definition:** Created **VLAN 20** (Named "Guest").
* **Port Mapping (Crucial Step):**
    * **Port 17 (Uplink):** Set as **TAGGED**. This is the "Trunk" line carrying traffic to the FortiGate.
    * **Port 4 (Access):** Set as **UNTAGGED**. This is where the user plugs in.
    * **PVID (Port 4):** Changed PVID to **20**. This stamps all traffic entering Port 4 with the "Guest" label.

<p align="center">
<img width="600" alt="Switch VLAN Setup" src="https://github.com/user-attachments/assets/1a928ac3-c8a1-482f-8909-ffec609aab10" />
<img width="600" alt="Port Config" src="https://github.com/user-attachments/assets/e037cf57-15f1-4a41-a2c2-75953940f19f" />
<img width="600" alt="PVID Settings" src="https://github.com/user-attachments/assets/8dc84598-c6bb-489e-8c5f-a93a26e4c949" />
</p>

### Step 3: Verification
* **Result:** Upon plugging the laptop into Port 4, it immediately released the old `192.168.10.x` address and acquired **`192.168.20.2`**.
* **Success:** The device is now logically isolated on the Guest Network.

<img width="600" alt="IP Verification" src="https://github.com/user-attachments/assets/0916fde5-f93d-4272-b925-40c6fc2c3148" />
<img width="667" height="213" alt="image" src="https://github.com/user-attachments/assets/6758caf1-eb92-4822-a98c-5873643ec680" />
---




---

## 3. Resilience Lab: Out-of-Band (OOB) Recovery
**Scenario:** During a configuration change, the primary "Internal" interface was disabled, resulting in a total lockout from the management console.

### The Problem
* **Lockout:** The primary LAN  was unresponsive.
* **Error:** Windows reported "General Failure" when trying to ping, because the laptop was trying to talk to a gateway that didn't exist anymore.

### The Solution: The "Back Door"
We utilized the dedicated **DMZ Port** on the FortiGate 60F to regain access.

1.  **Physical Connection:** Moved the ethernet cable from the Switch to the **DMZ Port**.
2.  **Static IP Configuration:**
    * Since the DMZ has no DHCP server, Windows failed to connect automatically.
    * **The Fix:** Manually configured the **Ethernet Adapter** settings in Windows to:
        * **IP:** 10.10.10.2
        * **Gateway:** 10.10.10.1
        * *Crucial Troubleshooting:* Initially, the static IP was applied to a disconnected adapter. The fix required identifying the active USB Ethernet adapter and applying the IP there.
3.  **Recovery:** Accessed https://10.10.10.1, logged in, and re-enabled the Internal Interface.

<img width="300" height="400" alt="image" src="https://github.com/user-attachments/assets/bff795d5-14d7-48fa-8a33-21d29320ead5" />

<p align="center">
<img width="400" alt="DMZ Physical Connection" src="https://github.com/user-attachments/assets/63d34c7a-5950-447d-85d4-86a3b15f02d7" />
<img width="400" height="450" alt="image" src="https://github.com/user-attachments/assets/eeb38ca2-6d3c-480f-a13f-e949df4eff03" />
</p>


## Project Summary
* **Implemented** granular Access Control Lists (ACLs) to successfully filter web traffic based on Source and Destination objects.
* **Architected** a Layer 2 Segmentation strategy using 802.1Q VLANs, properly configuring Trunks (Tagged) and Access Ports (Untagged/PVID).
* **Demonstrated** disaster recovery capabilities by performing Out-of-Band Management via a DMZ interface to restore a critical network appliance.
* **Troubleshot** Layer 1 and Layer 3 connectivity issues, including PVID mismatches and Static IP misconfiguration on host adapters.









